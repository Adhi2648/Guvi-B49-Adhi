<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3 APIs</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
</head>

<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">CheapShark Deals</h5>
                        <ul id="cheapSharkDeals" class="list-group"></ul>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Random Dog Image</h5>
                        <img id="dogImage" class="img-fluid mb-3" src="" alt="Random Dog">
                        <button id="getRandomDogButton" class="btn btn-primary">Get Random Dog</button>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">NBA Players</h5>
                        <ul id="playerList" class="list-group"></ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>

        //Great deals api call
        async function fetchCheapSharkDeals() {
            try {
                const apiUrl = "https://www.cheapshark.com/api/1.0/deals?storeID=1&upperPrice=15";
                const response = await fetch(apiUrl);
                const deals = await response.json();

                const cheapSharkDeals = document.getElementById("cheapSharkDeals");

                const numberOfDealsToDisplay = 10;
                for (let i = 0; i < numberOfDealsToDisplay; i++) {
                    const deal = deals[i];
                    const listItem = document.createElement("li");
                    listItem.className = "list-group-item";
                    listItem.textContent = `${deal.title} - Price: ${deal.salePrice}`;
                    cheapSharkDeals.appendChild(listItem);
                }
            } catch (error) {
                console.error("Error fetching CheapShark deals:", error);
            }
        }
        fetchCheapSharkDeals();

        ////////////////////////////////////////////////////////////////////////

        //Dogs images api call
        const apiUrl2 = "https://dog.ceo/api/breeds/image/random";
        const getRandomDogButton = document.getElementById("getRandomDogButton");
        const dogImage = document.getElementById("dogImage");

        async function fetchRandomDogImage() {
            try {
                const response = await fetch(apiUrl2);
                const data = await response.json();

                const imageUrl = data.message;
                dogImage.src = imageUrl;
                dogImage.alt = "Random Dog";
            } catch (error) {
                console.error("Error fetching dog image:", error);
            }
        }
        getRandomDogButton.addEventListener("click", fetchRandomDogImage);

        fetchRandomDogImage();

        //////////////////////////////////////////////////////////////////////

        //NBA Players List api call
        const apiUrl = "https://www.balldontlie.io/api/v1/players";
        const playerList = document.getElementById("playerList");

        async function fetchPlayers() {
            try {
                const response = await fetch(apiUrl);
                const data = await response.json();

                const players = data.data;

                playerList.innerHTML = "";

                players.forEach(player => {
                    const listItem = document.createElement("li");
                    listItem.textContent = `${player.first_name} ${player.last_name} (${player.team.full_name})`;
                    playerList.appendChild(listItem);
                });
            } catch (error) {
                console.error("Error fetching player data:", error);
            }
        }
        fetchPlayers();
    </script>
</body>

</html>